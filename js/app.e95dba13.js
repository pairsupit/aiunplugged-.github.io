(function(t){function e(e){for(var n,s,o=e[0],l=e[1],c=e[2],u=0,f=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);h&&h(e);while(f.length)f.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==r[l]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},r={app:0},a=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/Hexapawn/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var h=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("64a9"),r=i.n(n);r.a},"0a72":function(t,e,i){"use strict";var n=i("1a91"),r=i.n(n);r.a},"1a91":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("h1",[t._v("The Sweet Learning Computer - aiunplugged")]),n("div",{attrs:{id:"main-view"}},[n("div",{attrs:{id:"main-game"}},[n("h4",{staticClass:"left-text"}),n("DraggableChess",{attrs:{state:this.state,halloween:this.halloween},on:{"new-state":t.handleNewState}}),n("h4",{staticClass:"left-text"},[t._v("คะแนน")]),n("div",{staticClass:"points"},[n("div",[n("div",{staticClass:"points-svg-container"},[n("svg",{attrs:{width:"50",height:"50",viewBox:"0 0 50 50"}},[n("image",{attrs:{width:"50",height:"50","xlink:href":i("ab97")}})])]),1==t.displayWin?n("div",{staticStyle:{float:"right",color:"green"}},[t._v("+1")]):t._e(),n("div",{staticStyle:{width:"50px",margin:"0 auto"}},[t._v(t._s(t.winsPlayer))])]),n("div",[n("div",{staticClass:"points-svg-container"},[n("svg",{attrs:{width:"50",height:"50",viewBox:"0 0 50 50"}},[n("image",{attrs:{width:"50",height:"50","xlink:href":i("bf3e")}})])]),2==t.displayWin?n("div",{staticStyle:{float:"right",color:"red"}},[t._v("+1")]):t._e(),n("div",{staticStyle:{width:"50px",margin:"0 auto"}},[t._v(t._s(t.winsPC))])])])],1),n("div",{attrs:{id:"main-rules"}},[n("div",{staticClass:"row"},[n("h4",{staticClass:"left-text"},[t._v("กฎของคอมพิวเตอร์")]),n("div",{staticClass:"limit-options-btn"},[n("div",[t._v("การเคลื่อนไหวที่เป็นไปได้เท่านั้น")]),n("label",{staticClass:"switch"},[n("input",{attrs:{type:"checkbox"},on:{click:t.clickSwitch}}),n("span",{staticClass:"slider round"})])])]),n("div",{staticClass:"rulesets"},t._l(t.computerModel.getModel(),(function(e,i){return n("div",{key:i,staticClass:"ruleset",class:{outlinerule:t.compareStates(e.state,t.state)}},[!t.filter||t.checkIfStateIsContained(t.filteredStates,e.state)?n("PossibleActions",{attrs:{state:e.state,actions:e.actions,sweets:e.sweets,forceUpdate:t.forceUpdate,currentState:t.compareStates(e.state,t.state),chosenPlayType:t.chosenPlayType,halloween:t.halloween}}):t._e()],1)})),0)])]),n("Tour",{attrs:{halloween:this.halloween}})],1)},a=[],s=(i("386d"),i("3835")),o=i("2909"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field"},t._l(t.currentState,(function(e,r){return n("div",{directives:[{name:"drag-and-drop",rawName:"v-drag-and-drop"},{name:"touch",rawName:"v-touch:moved",value:t.handleMove,expression:"handleMove",arg:"moved"},{name:"touch",rawName:"v-touch:moving",value:t.handleMoving,expression:"handleMoving",arg:"moving"},{name:"touch",rawName:"v-touch:end",value:t.endHandler,expression:"endHandler",arg:"end"}],key:r,ref:"fieldslot",refInFor:!0,on:{drag:t.handleDrag,drop:t.handleDrop}},[0===e?n("div",{staticClass:"field-slot",class:{outline:t.highlights[r]}},[n("img",{attrs:{id:r,src:i("9f3c"),alt:"empty",width:"100%"}})]):t._e(),1===e?n("div",{staticClass:"field-slot monkey"},[n("img",{attrs:{id:r,src:i("ab97"),alt:"human",width:"100%"}})]):t._e(),2===e?n("div",{staticClass:"field-slot croco",class:{outline:t.highlights[r]}},[n("img",{attrs:{id:r,src:i("bf3e"),alt:"computer",width:"100%"}})]):t._e()])})),0)},c=[];i("6c7b"),i("ac6a"),i("4f7f"),i("5df3"),i("1c4c"),i("55dd");function h(t){return 1==t?"down":2==t?"up":void 0}function u(t,e){var i=Object(o["a"])(t),n=Math.sqrt(i.length),r=1==e?2:1,a=0,s=h(e);if(n*n==i.length){for(var l=i.map((function(){return i.splice(0,n)})).filter((function(t){return t})),c=[],u=0;u<n;u++)for(var f=0;f<l[u].length;f++)if(l[u][f]==e){var d="down"==s?u+1:u-1;d>=0&&d<l.length&&(l[d][f]==a&&c.push([u*n+f,d*n+f]),f+1<n&&l[d][f+1]==r&&c.push([u*n+f,d*n+f+1]),f-1>=0&&l[d][f-1]==r&&c.push([u*n+f,d*n+f-1]))}return c}console.log("provided state is not a square")}function f(t,e){var i=e[0],n=e[1],r=t.slice(0);return r[i]=0,r[n]=t[i],r}function d(t,e){var i=Math.sqrt(t.length),n=1==e?2:1,r=h(e);if(0==t.filter((function(t){return t==n})).length)return!0;if("down"==r)for(var a=0;a<i;a++)if(t[t.length-1-a]==e)return!0;if("up"==r)for(var s=0;s<i;s++)if(t[s]==e)return!0;return 0==u(Object(o["a"])(t),n).length}function p(t){var e=m(t,0,1);return e=e.sort((function(t,e){return t.iteration-e.iteration})).map((function(t){var e=t.state,i=t.iteration;return i%2==1?e:[]})).filter((function(t){return t.length>0})),Array.from(new Set(e.map(JSON.stringify)),JSON.parse)}function m(t,e,i){for(var n=[{state:t,iteration:e}],r=h(i),a=1==i?2:1,s=u(Object(o["a"])(t),i,r),l=0;l<s.length;l++){var c=f(t,s[l]);if(!d(c,i)){var p=m(c,e+1,a);n=n.concat(p)}}return n}function g(t,e){for(var i=!0,n=0;n<t.length;n++){i=!0;var r=t[n];if(e.length!=r.length)return!1;for(var a=0;a<e.length;a++)r[a]!=e[a]&&(i=!1);if(1==i)return!0}return i}function v(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function y(t,e){for(var i=0;i<t.length;i++)if(v(t[i],e))return!0;return!1}var w={name:"DraggableChess",components:{},props:{state:Array,halloween:Boolean},data:function(){return{currentState:this.state,currentlyDragging:null,playerIsAllowedToMove:!0,highlights:new Array(this.state.length).fill(!1)}},methods:{handleMove:function(t){if(this.playerIsAllowedToMove&&!(t instanceof MouseEvent)&&(this.currentlyDragging=t.srcElement,1==this.currentState[this.currentlyDragging.id])){for(var e=u(this.currentState,1),i=[],n=0;n<e.length;n++)e[n][0]==this.currentlyDragging.id&&i.push(e[n][1]);for(var r=0;r<i.length;r++)this.highlights[i[r]]=!0;this.$forceUpdate()}},handleMoving:function(t){},endHandler:function(t){if(this.playerIsAllowedToMove){for(var e=t.changedTouches[0],i=this.$refs.fieldslot,n=0;n<i.length;n++){var r=i[n].getBoundingClientRect();if(e.clientX>r.left&&e.clientX<r.right&&e.clientY>r.top&&e.clientY<r.bottom){var a=this.currentlyDragging.id,s=n;this.performAction(a,s)}}this.highlights.fill(!1),this.$forceUpdate()}},handleDrop:function(t){if(this.playerIsAllowedToMove){this.highlights.fill(!1),this.$forceUpdate();var e=this.currentlyDragging.id,i=t.target.id;this.performAction(e,i)}},performAction:function(t,e){var i=this.currentState[t],n=u(this.currentState,1),r=[t,e];g(n,r)&&(this.currentState[this.currentlyDragging.id]=0,this.currentState[e]=i,this.$forceUpdate(),this.playerIsAllowedToMove=!1,this.$emit("new-state",this.currentState))},handleDrag:function(t){if(this.playerIsAllowedToMove&&(this.currentlyDragging=t.srcElement,1==this.currentState[this.currentlyDragging.id])){for(var e=u(this.currentState,1),i=[],n=0;n<e.length;n++)e[n][0]==this.currentlyDragging.id&&i.push(e[n][1]);for(var r=0;r<i.length;r++)this.highlights[i[r]]=!0;this.$forceUpdate()}}},watch:{state:function(t,e){this.currentState=t,this.playerIsAllowedToMove=!0}}},b=w,k=(i("0a72"),i("2877")),S=Object(k["a"])(b,l,c,!1,null,"a7131ac4",null),x=S.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"actions-field"},[i("Chess",{attrs:{state:t.state,dimension:t.dimension,actions:t.actions,halloween:t.halloween}}),i("div",{staticClass:"actions-rating"},[i("svg",{attrs:{width:t.dimension,height:t.dimension}},t._l(t.sweets,(function(e,n){return i("g",{key:n},t._l(e,(function(r){return i("g",{key:r},[i("circle",{attrs:{cx:t.dimension/4*n+10,cy:t.dimension/4*(r-1)+t.dimension/Math.pow(2,e),r:"10",fill:t.colors[n].fill}}),t.currentState&&n!=t.chosenPlayType?i("animateMotion",{attrs:{path:"M 0 0 V -10 V -5 V -2 Z",dur:"0.5s",repeatCount:"indefinite"}}):t._e(),t.currentState&&n==t.chosenPlayType?i("animateMotion",{attrs:{path:"M 0 0 V -10 V -30 Z",dur:"0.5s",repeatCount:"indefinite"}}):t._e()],1)})),0)})),0)]),i("div",{staticStyle:{display:"none"}},[t._v(t._s(t.forceUpdate))])],1)},T=[],_=(i("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("svg",{attrs:{width:t.dimension,height:t.dimension}},[n("defs",[n("marker",{attrs:{id:"arrow-red",markerWidth:"10",markerHeight:"10",refX:"0",refY:"2",orient:"auto",markerUnits:"strokeWidth"}},[n("path",{attrs:{d:"M0,0 L0,4 L5,2 z",fill:"#f00"}})]),n("marker",{attrs:{id:"arrow-green",markerWidth:"10",markerHeight:"10",refX:"0",refY:"2",orient:"auto",markerUnits:"strokeWidth"}},[n("path",{attrs:{d:"M0,0 L0,4 L5,2 z",fill:"#0f0"}})]),n("marker",{attrs:{id:"arrow-blue",markerWidth:"10",markerHeight:"10",refX:"0",refY:"2",orient:"auto",markerUnits:"strokeWidth"}},[n("path",{attrs:{d:"M0,0 L0,4 L5,2 z",fill:"#00f"}})]),n("marker",{attrs:{id:"arrow-yellow",markerWidth:"10",markerHeight:"10",refX:"0",refY:"2",orient:"auto",markerUnits:"strokeWidth"}},[n("path",{attrs:{d:"M0,0 L0,4 L5,2 z",fill:"#ffa500"}})]),n("marker",{attrs:{id:"arrow-purple",markerWidth:"10",markerHeight:"10",refX:"0",refY:"2",orient:"auto",markerUnits:"strokeWidth"}},[n("path",{attrs:{d:"M0,0 L0,4 L5,2 z",fill:"#80f"}})])]),t._l(t.state,(function(e,r){return n("g",{key:Math.random()},[0===e?n("rect",{staticStyle:{fill:"rgb(255,255,255)"},attrs:{x:t.dimension/3*(r%3),y:t.dimension/3*Math.floor(r/3),width:t.dimension/3,height:t.dimension/3,stroke:"lightgray","stroke-width":"1"}}):t._e(),1!==e||t.halloween?t._e():n("image",{attrs:{width:t.dimension/3,height:t.dimension/3,x:t.dimension/3*(r%3),y:t.dimension/3*Math.floor(r/3),"xlink:href":i("ab97")}}),2!==e||t.halloween?t._e():n("image",{attrs:{width:t.dimension/3,height:t.dimension/3,x:t.dimension/3*(r%3),y:t.dimension/3*Math.floor(r/3),"xlink:href":i("bf3e")}})])})),t._l(t.actions,(function(e,i){return n("g",{key:i},[n("line",{attrs:{x1:t.dimension/3*(e[0]%3)+t.dimension/6,y1:t.dimension/3*Math.floor(e[0]/3)+t.dimension/6,x2:t.dimension/3*(e[1]%3)+t.dimension/6,y2:t.dimension/3*Math.floor(e[1]/3)+t.dimension/6,stroke:t.colors[i].hex,"stroke-width":"3","marker-end":t.colors[i].name}})])}))],2)])}),C=[],P={name:"Chess",props:{state:Array,dimension:{type:Number,default:180},actions:Array,halloween:Boolean},data:function(){return{colors:[{name:"url(#arrow-blue)",hex:"#00f",fill:"blue"},{name:"url(#arrow-red)",hex:"#f00",fill:"red"},{name:"url(#arrow-green)",hex:"#0f0",fill:"green"},{name:"url(#arrow-yellow)",hex:"#ffa500",fill:"orange"},{name:"url(#arrow-purple)",hex:"#80f",fill:"purple"}]}}},A=P,O=Object(k["a"])(A,_,C,!1,null,"839c21f4",null),W=O.exports,j={name:"PossibleActions",components:{Chess:W},props:{state:Array,actions:Array,sweets:Array,forceUpdate:Number,currentState:Boolean,chosenPlayType:Number,halloween:Boolean},data:function(){return{colors:[{name:"url(#arrow-blue)",hex:"#00f",fill:"blue"},{name:"url(#arrow-red)",hex:"#f00",fill:"red"},{name:"url(#arrow-green)",hex:"#0f0",fill:"green"},{name:"url(#arrow-yellow)",hex:"#ffa500",fill:"orange"},{name:"url(#arrow-purple)",hex:"#80f",fill:"purple"}],dimension:90,currentSweets:this.sweets,forceUpdateHelper:1}},watch:{forceUpdate:function(t,e){this.forceUpdateHelper=t},chosenPlayType:function(t,e){}}},U=j,D=(i("d9f8"),Object(k["a"])(U,M,T,!1,null,"19a35fb1",null)),$=D.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-tour",{attrs:{name:"myTour",steps:t.steps,options:t.myOptions}})},I=[],L={name:"Tour",props:{halloween:Boolean},data:function(){return{myOptions:{useKeyboardNavigation:!1,labels:{buttonSkip:"ข้าม",buttonPrevious:"ย้อนกลับ",buttonNext:"ถัดไป",buttonStop:"เสร็จสิ้น"}},steps:[{target:"#main-game>h4",content:'คุณเล่นเป็น <strong>หน้ายิ้ม</strong>! คุณจะเป็นฝ่ายชนะ ถ้า\n          <ul style="text-align: left;">\n          <li>ตัวหมากตัวใดตัวหนึ่งของคุณไปถึงอีกด้านของกระดาน</li>\n          <li>คู่ต่อสู้ไม่สามารถเคลื่อนไหวได้อีกต่อไป</li>\n          <li>หรือคุณกินตัวหมากของศัตรูจนหมด</li>\n          </ul>',params:{placement:"right"}},{target:"img:first-of-type",content:"วิธีการเดินคือ <strong>ให้ลากแล้วปล่อย</strong>"},{target:"#main-rules>div>h4",content:"คอมพิวเตอร์จะค้นหารูปแบบการเดินที่หน้าตาเหมือนหน้ากระดานปัจจุบันแล้วสุ่มสีเพื่อเดิน",params:{placement:"left"}},{target:".limit-options-btn",content:'ด้วยปุ่มนี้คุณสามารถเปลี่ยนวิธีการดูรูปแบบการเดินได้ <ul style="text-align: left;">\n          <li>ดูรูปแบบการเดินที่เป็นไปได้เท่านั้น</li>\n          <li>ดูรูปแบบการเดินทั้งหมด</li>\n            </ul>',params:{placement:"bottom"}}]}},mounted:function(){this.$tours["myTour"].start()}},F=L,H=Object(k["a"])(F,N,I,!1,null,"da68b8aa",null),B=H.exports,E=i("d4ec"),X=i("bee2"),Y=function(){function t(e){Object(E["a"])(this,t),this.model=p(e).map((function(t){var e=u(t,2);return{state:t,actions:e,sweets:new Array(e.length).fill(1)}})),this.lastlastSituation=-2,this.lastSituation=-1,this.lastlastActionTaken=-2,this.lastActionTaken=-1}return Object(X["a"])(t,[{key:"getModel",value:function(){return this.model}},{key:"findObjectForState",value:function(t){for(var e=0;e<this.model.length;e++){for(var i=!0,n=0;n<t.length;n++)this.model[e].state[n]!=t[n]&&(i=!1);if(i)return e}return-1}},{key:"choosePlayType",value:function(t){var e=this.findObjectForState(t);if(!(e<0)){var i=this.model[e].sweets.map((function(t,e){return new Array(t).fill(e)})).flat(),n=i[Math.floor(Math.random()*i.length)];return this.lastlastSituation=this.lastSituation,this.lastSituation=e,this.lastlastActionTaken=this.lastActionTaken,this.lastActionTaken=n,[this.model[e].actions[n],n]}}},{key:"updateModel",value:function(t){if(-1!=this.lastActionTaken&&-1!=this.lastSituation)if(t)this.model[this.lastSituation].sweets[this.lastActionTaken]<3&&this.model[this.lastSituation].sweets[this.lastActionTaken]++;else{if(this.model[this.lastSituation].sweets[this.lastActionTaken]>0){this.model[this.lastSituation].sweets[this.lastActionTaken]--;for(var e=!0,i=0;i<this.model[this.lastSituation].sweets.length;i++)this.model[this.lastSituation].sweets[i]>0&&(e=!1);e&&this.model[this.lastlastSituation].sweets[this.lastlastActionTaken]>0&&this.model[this.lastlastSituation].sweets[this.lastlastActionTaken]--}void 0===this.lastActionTaken&&this.model[this.lastlastSituation].sweets[this.lastlastActionTaken]--}}},{key:"computerWon",value:function(){this.updateModel(!0)}},{key:"humanWon",value:function(){this.updateModel(!1)}}]),t}(),z=[1,1,1,0,0,0,2,2,2],V={name:"app",components:{DraggableChess:x,PossibleActions:$,Tour:B},data:function(){return{state:[].concat(z),player:1,computer:2,active:1,winsPlayer:0,winsPC:0,computerModel:new Y([].concat(z)),forceUpdate:1,timeForPC:3e3,displayWin:0,chosenPlayType:-1,halloween:!1,filteredStates:[],filter:!1}},methods:{compareStates:v,checkIfStateIsContained:y,clickSwitch:function(t){this.filter=!this.filter},checkWinner:function(t,e){if(d(t,e)){var i=this;return e===this.player?(this.displayWin=1,setTimeout((function(){i.displayWin=0,i.winsPlayer++}),this.timeForPC/2)):(this.displayWin=2,setTimeout((function(){i.displayWin=0,i.winsPC++}),this.timeForPC/2)),!0}return!1},updateSelection:function(){var t=[],e=u(this.state,this.player);for(var i in e)t.push(f(Object(o["a"])(this.state),e[i]));this.filteredStates=t},handleNewState:function(t){if(this.$forceUpdate(),this.checkWinner(t,this.player)){this.computerModel.humanWon(),this.forceUpdate++;var e=this;setTimeout((function(){e.state=[].concat(z),e.updateSelection()}),this.timeForPC/2)}else{if(this.state=t,this.active=this.active==this.player?this.computer:this.player,this.active===this.computer){var i=this.computerModel.choosePlayType(this.state),n=Object(s["a"])(i,2),r=n[0],a=n[1];if(void 0===r){this.computerModel.humanWon(),this.forceUpdate++,this.winsPlayer++;var o=this;setTimeout((function(){o.state=[].concat(z),o.updateSelection()}),1.5*o.timeForPC)}else{this.chosenPlayType=a;var l=f(this.state,r),c=this;setTimeout((function(){c.chosenPlayType=-1,c.state=l,c.updateSelection(),c.checkWinner(l,c.computer)&&(c.computerModel.computerWon(),c.forceUpdate++,setTimeout((function(){c.state=[].concat(z),c.updateSelection()}),1.5*c.timeForPC))}),this.timeForPC)}}this.active=this.active==this.player?this.computer:this.player}}},mounted:function(){var t=window.location.search.substring(1),e=new URLSearchParams(t);e.get("time")&&(this.timeForPC=e.get("time")),this.updateSelection()}},J=V,q=(i("034f"),Object(k["a"])(J,r,a,!1,null,null,null)),R=q.exports,Z=i("b2e1"),K=i.n(Z),G=i("2536"),Q=i.n(G),tt=i("0086"),et=i.n(tt);i("2440"),n["a"].config.productionTip=!1,n["a"].use(K.a),n["a"].use(Q.a),n["a"].use(et.a),new n["a"]({render:function(t){return t(R)}}).$mount("#app")},"64a9":function(t,e,i){},"9c15":function(t,e,i){},"9f3c":function(t,e,i){t.exports=i.p+"img/white.4bfd8e7a.svg"},ab97:function(t,e,i){t.exports=i.p+"img/human.f143fca4.svg"},bf3e:function(t,e,i){t.exports=i.p+"img/computer.d9c786fd.svg"},d9f8:function(t,e,i){"use strict";var n=i("9c15"),r=i.n(n);r.a}});
//# sourceMappingURL=app.e95dba13.js.map